# Dropping to the shell
[[manager.prepend_keymap]]
on = "!"
run = 'shell "$SHELL" --block'
desc = "Open shell here"

# Opening nvim in cwd
[[manager.prepend_keymap]]
on = "<C-e>"
run = 'shell "nvim ." --block'
desc = "Open nvim in cwd"

# Close input by once Esc press
[[input.prepend_keymap]]
on = "<Esc>"
run = "close"
desc = "Cancel input"

# macOS: Preview files with the system Quick Look
# [[manager.prepend_keymap]]
# on = "<C-p>"
# run = '''
#   shell 'qlmanage -p "$@"'
# '''

# Make vertical moviments wrap around
[[manager.prepend_keymap]]
on = "k"
run = "plugin arrow -1"

[[manager.prepend_keymap]]
on = "j"
run = "plugin arrow 1"

[[manager.prepend_keymap]]
on = "<Up>"
run = "plugin arrow -1"

[[manager.prepend_keymap]]
on = "<Down>"
run = "plugin arrow 1"

# Lazygit keybind
[[manager.prepend_keymap]]
on = ["g", "i"]
run = "plugin lazygit"
desc = "run lazygit"

[[manager.prepend_keymap]]
on = ["g", "r"]
desc = "Go to root of Git repository"
run = 'shell -- ya emit cd "$(git rev-parse --show-toplevel)"'

# Change mode keybind
[[manager.prepend_keymap]]
on = ["c", "m"]
run = "plugin chmod"
desc = "Chmod on selected files"

# eza-preview
[[manager.prepend_keymap]]
on = ["E"]
run = "plugin eza-preview"
desc = "Toggle tree/list dir preview"

[[manager.prepend_keymap]]
on = ["-"]
run = "plugin eza-preview --args='--inc-level'"
desc = "Increment tree level"

[[manager.prepend_keymap]]
on = ["_"]
run = "plugin eza-preview --args='--dec-level'"
desc = "Decrement tree level"

[[manager.prepend_keymap]]
on = ["$"]
run = "plugin eza-preview --args='--toggle-follow-symlinks'"
desc = "Toggle tree follow symlinks"

[[manager.prepend_keymap]]
on = "p"
run = "plugin smart-paste"
desc = "Paste into the hovered directory or CWD"

[[manager.prepend_keymap]]
on = "t"
run = "plugin smart-tab"
desc = "Create a tab and enter the hovered directory"

[[manager.prepend_keymap]]
on = "<C-m>"
run = "plugin toggle-pane max-preview"
desc = "Maximize or restore the preview pane"

[[manager.prepend_keymap]]
on = "<C-p>"
run = "plugin toggle-pane min-preview"
desc = "Show or hide the preview pane"

[[manager.prepend_keymap]]
on = "<S-Up>"
run = "seek -5"
desc = "Scroll preview up by 5 lines"

[[manager.prepend_keymap]]
on = "<S-Down>"
run = "seek 5"
desc = "Scroll preview down by 5 lines"

[[manager.prepend_keymap]]
on = ["g", "u"]
run = "plugin parent-arrow -1"
desc = "Go up in parent directory"

[[manager.prepend_keymap]]
on = ["g", "d"]
run = "plugin parent-arrow 1"
desc = "Go down in parent directory"

[[manager.prepend_keymap]]
on = ["f", "r"]
run = "plugin fr rg"
desc = "Search file by content (rg)"

[[manager.prepend_keymap]]
on = ["f", "a"]
run = "plugin fr rga"
desc = "Search file by content (rga)"
